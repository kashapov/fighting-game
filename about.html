<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Contra Fight - about</title>
    <link rel="stylesheet" type="text/css" href="assets/css/about.css">
    
</head>

<body>
    <div class="stars"></div>
    <div class="twinkling"></div>

    <section class="wrapper">
        <section class="header">
            <div class="game-logo"><a href="index.html">&nbsp;</a></div>
            <section class="game-about-menu">
                <nav>
                    <a href="#about">about</a>
                    <a href="#screenshots">screenshots</a>
                    <a href="#author">author</a>
                </nav>
            </section>
        </section>
        <section class="main">
            <section id="about">
                <div style="height: 170px;"></div>
                <div class="game-about">
                    <h1 class="game-name">Contra Fight</h1>            
                    <hr><br>
                    <p class="greeting-txt">Sample fighting game.</p>
                    <h3 class="greeting-h3">To play:</h3>
                    <ol class="greeting-list">
                        <li class="greeting-list-item">Start fight.</li>
                        <li class="greeting-list-item">Press "choose your action" button.</li>
                        <li class="greeting-list-item">Choose action: attack or heal.</li>
                        <li class="greeting-list-item">Solve an arithmetic example or translate world.</li>
                        <li class="greeting-list-item">Kill the enemies.</li>
                        <li class="greeting-list-item">Have Fun!</li>
                    </ol>
                    <button type="button" id="btnToIndex" class="button">Let's play</button> 
                </div>
                
            </section>
    
            <section id="screenshots">
                    <div style="height: 170px;"></div>
                    <div class="game-about">
                        <div class="component" id="component">
                                <section class="component-main"></section>    
                                <section class="component-menu">
                                    <nav class="component-nav">
                                        <div class="buttons">
                                            <img alt="to left" class="controls left" id="previous" src="assets/images/chevron-circle-left.svg">                        
                                            <img alt="to right" class="controls right" id="next" src="assets/images/chevron-circle-right.svg">
                                        </div>
                                    </nav>
                                </section>
                            </div>
                    </div>
                
            </section>
    
            <section id="author">
                    <div style="height: 170px;"></div>
                    <div class="game-about">
                        <h3 class="greeting-h3">Author:</h3>
                        <img class="author" alt="author" src="assets/images/game-preview/author.png">
                        <p class="greeting-txt">Kashapov Andrey</p>
                        <p class="greeting-txt">https://github.com/kashapov</p>
                    </div>
                
            </section>
        </section>
        
               
    </section>
    <script>
        btnToIndex = document.querySelector('#btnToIndex');
    
        btnToIndex.addEventListener('click', () => {
            window.location.href = "index.html";
        });

        var tipsIni = {
            "index": "index.jpg",
            "fight scene": "fight.jpg",
            "choose action": "action.jpg",
            "task arithmetic": "arithmetic.jpg",
            "task translate": "translate.jpg",
            "score table": "score.jpg",
        };

        // --- Render Tips ---
        function renderItems(tips) {
        var i = 0;

        var componentMain = document.querySelector('.component-main');
        var buttonNext = document.querySelector('#previous');
        var buttonUl = document.createElement('ul');

        buttonUl.className = "nav-btns";
        
        for (var tip in tips) {
            var value = tips[tip];
            var componentInfo = document.createElement('div');
            componentInfo.className = "component-info";

            var buttonLi = document.createElement('li');
            buttonLi.className = "slide-nav-btn";
            buttonLi.setAttribute('data-slide', i);
            
            i++;
            if( i == 1 ) {
            componentInfo.className = "component-info showing";
            buttonLi.className = "slide-nav-btn current";
            }

            var tipTitle = document.createElement('strong');
            tipTitle.className = "info-title";
            tipTitle.textContent = tip;

            var tipInfo = document.createElement('img');
            tipInfo.className = "info-txt";
            tipInfo.setAttribute("src","assets/images/game-preview/" + value);

            //tipInfo.textContent = value;

            componentInfo.appendChild(tipTitle);
            componentInfo.appendChild(tipInfo);
            componentMain.appendChild(componentInfo);    

            buttonUl.appendChild(buttonLi);
            
        }
        
        buttonNext.parentNode.insertBefore(buttonUl, buttonNext.nextSibling);
        }

        renderItems(tipsIni);



        // --- navigation ---
        var tips = document.querySelectorAll('.component-main .component-info');
        var currentTip = 0;

        var dots = document.querySelectorAll('.slide-nav-btn');
        var currentDot = 0;


        function goToTip(n){
        tips[currentTip].className = 'component-info';
        currentTip = (n+tips.length)%tips.length;
        tips[currentTip].className = 'component-info showing';

        dots[currentDot].className = 'slide-nav-btn';
        currentDot = (n+dots.length)%dots.length;

        var current = document.querySelector('[data-slide="' + n + '"]'); 
        current.className = "slide-nav-btn current";
        }

        function nextTip() {
        var cntTips = document.querySelectorAll(".nav-btns li");

        if( currentTip+1 == cntTips.length )
            goToTip(0);
        else
            goToTip(currentTip+1);
        }

        function previousTip() {
        var cntTips = document.querySelectorAll(".nav-btns li");
        
        if( currentTip-1 == -1 ) 
            goToTip(cntTips.length-1);
        else
            goToTip(currentTip-1);
        }

        var next = document.getElementById('next');
        var previous = document.getElementById('previous');

        next.onclick = function() {
            nextTip();
        };

        previous.onclick = function() {
            previousTip();
        };


        // --- navi dots ---
        var links = document.querySelectorAll(".nav-btns li");

        for (var i = 0; i < links.length; ++i) {
        var link = links[i];

        link.addEventListener("click", function (e) {
            var index = parseInt(this.getAttribute("data-slide"), 10);
            
            goToTip(index);
        });
        }
    </script>
</body>

</html>